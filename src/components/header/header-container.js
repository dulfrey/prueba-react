import React , { useState, useEffect}  from 'react';
import '../../assets/css/App.css';
import SearchBox from './searchbox'
import Profile from './profile';
import cartimg from '../../assets/images/shoping-cart.png'
import { Link } from 'react-router-dom';
import { connect} from 'react-redux';


function FudHeader({cart}){
    const [cartCount , setCartcount] = useState(0);
    
    useEffect(()=>{
        let count = 0 ;
        cart.forEach(element => {
            count += element.qty
        });
        setCartcount(count);
    },[cart, cartCount]);

        return (
        <div className="fudheader">
            <div className="logo-div">
                <svg width="28" height="15" viewBox="0 0 28 15" fill="none" xmlns="http://www.w3.org/2000/svg" className="blogIcon"><path d="M11.9168 13.8525C11.9337 13.902 11.9687 13.945 12.0163 13.9746C12.0639 14.0043 12.1215 14.0189 12.1796 14.016C12.2319 14.016 12.283 14.0026 12.3269 13.9774C12.3708 13.9522 12.4056 13.9163 12.4271 13.874C12.4399 13.8551 12.4482 13.8341 12.4513 13.8123C13.0168 12.4834 13.2065 11.0517 13.0038 9.64262C12.8012 8.23353 12.2122 6.89009 11.2887 5.73002C8.3388 3.07043 4.68262 1.11244 0.656764 0.0362521C0.591979 0.00896628 0.520435 -0.0032712 0.448872 0.000747343C0.377309 0.00476588 0.308103 0.0248841 0.247707 0.0591993C0.187311 0.0935145 0.137714 0.140916 0.10363 0.196923C0.0695457 0.25293 0.0520799 0.315701 0.0528547 0.379356C-0.202259 3.68999 0.468902 7.00526 2.00654 10.0299C2.92783 11.4125 4.20332 12.5828 5.72952 13.4459C7.25572 14.3089 8.98963 14.8404 10.7905 14.9972H10.8841C10.9573 14.9944 11.0264 14.9667 11.0771 14.9197C11.1277 14.8727 11.156 14.8102 11.1559 14.7452C11.158 14.7283 11.158 14.7112 11.1559 14.6943L11.1378 14.6594C9.04335 10.4454 6.2828 6.51795 2.93957 2.9957C2.91419 2.96885 2.90021 2.93496 2.90003 2.89991C2.89985 2.86485 2.9135 2.83088 2.9386 2.80382C2.9637 2.77676 2.99869 2.75832 3.03748 2.75175C3.07626 2.74519 3.1164 2.75091 3.15096 2.76787C6.97754 5.81594 9.97214 9.59746 11.9078 13.8257L11.9168 13.8525Z" fill="white"></path><path d="M15.9541 13.8281C17.8894 9.59973 20.8841 5.81815 24.711 2.77027C24.7455 2.75331 24.7857 2.74763 24.8244 2.7542C24.8632 2.76076 24.8982 2.77917 24.9233 2.80623C24.9484 2.83329 24.9621 2.8673 24.9619 2.90235C24.9617 2.93741 24.9477 2.97129 24.9223 2.99815C21.5787 6.52018 18.8182 10.4476 16.7241 14.6618L16.706 14.6967C16.7035 14.7136 16.7035 14.7307 16.706 14.7476C16.7059 14.8126 16.7342 14.8751 16.7848 14.9221C16.8354 14.9691 16.9046 14.9969 16.9778 14.9996H17.0714C18.8723 14.8429 20.6062 14.3114 22.1324 13.4483C23.6586 12.5853 24.9341 11.4149 25.8554 10.0323C27.3948 7.0081 28.067 3.69269 27.8121 0.381799C27.8128 0.318144 27.7954 0.255374 27.7613 0.199367C27.7272 0.14336 27.6776 0.0959577 27.6172 0.0616425C27.5568 0.0273272 27.4876 0.00720903 27.416 0.00319049C27.3445 -0.000828051 27.2729 0.0113685 27.2082 0.0386544C23.1834 1.11525 19.5283 3.07326 16.5792 5.73247C15.6559 6.89263 15.0671 8.23606 14.8645 9.64511C14.6618 11.0542 14.8514 12.4858 15.4166 13.8148C15.4202 13.8365 15.4284 13.8574 15.4408 13.8764C15.4623 13.9187 15.4971 13.9546 15.541 13.9798C15.5849 14.005 15.6361 14.0184 15.6884 14.0185C15.7465 14.0213 15.804 14.0067 15.8516 13.977C15.8992 13.9474 15.9343 13.9044 15.9511 13.855L15.9541 13.8281Z" fill="white"></path></svg>
                 superf√ºds
            </div>
            <Link to="/cart">
                
                <img className="cart"
                    src={cartimg}
                    alt="cart"
                ></img>
                <span className="header-counter">{cartCount == 0  ? "" : cartCount}</span>
            </Link>
            
            <SearchBox></SearchBox>
            
            <Profile/>
        </div>);
    
}

const mapStateToProps = state => {
    return {
        cart: state.shop.cart
    }
}

export default connect(mapStateToProps)( FudHeader);